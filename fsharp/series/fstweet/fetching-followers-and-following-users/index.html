<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.30.2" />
  
  <meta name="description" content="Demystifying">

  
  <link rel="alternate" hreflang="en-us" href="https://www.demystifyfp.com/fsharp/series/fstweet/fetching-followers-and-following-users/">

  
  


  

  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  
  <link rel="stylesheet" href="/css/custom.css">
  

  

  
  <link rel="alternate" href="https://www.demystifyfp.com/index.xml" type="application/rss+xml" title="Demystify FP">
  <link rel="feed" href="https://www.demystifyfp.com/index.xml" type="application/rss+xml" title="Demystify FP">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://www.demystifyfp.com/fsharp/series/fstweet/fetching-followers-and-following-users/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@demystifyfp">
  <meta property="twitter:creator" content="@demystifyfp">
  
  <meta property="og:site_name" content="Demystify FP">
  <meta property="og:url" content="https://www.demystifyfp.com/fsharp/series/fstweet/fetching-followers-and-following-users/">
  <meta property="og:title" content="Fetching Followers and Following Users | Demystify FP">
  <meta property="og:description" content="">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2017-11-01T06:59:48&#43;05:30">
  
  <meta property="article:modified_time" content="2017-11-01T06:59:48&#43;05:30">
  

  

  <title>Fetching Followers and Following Users | Demystify FP</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Demystify FP</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
            Books
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="nav-item">
              <a href="http://products.tamizhvendan.in/fsharp-applied">
                
                <span>F# Applied</span>
              </a>
            </li>
            
          </ul>
        </li>

        
        

        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
            Tutorials
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="nav-item">
              <a href="/fsharp/series/fstweet/intro">
                
                <span>Twitter Clone in F#</span>
              </a>
            </li>
            
          </ul>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <div class="article-inner">
      <h1 itemprop="name">Fetching Followers and Following Users</h1>

      

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2017-11-01 06:59:48 &#43;0530 IST" itemprop="datePublished">
      Wed, Nov 1, 2017
    </time>
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="https://www.demystifyfp.com/fsharp/series/fstweet/fetching-followers-and-following-users/#disqus_thread"></a>
  

  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Fetching%20Followers%20and%20Following%20Users&amp;url=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2ffetching-followers-and-following-users%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2ffetching-followers-and-following-users%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2ffetching-followers-and-following-users%2f&amp;title=Fetching%20Followers%20and%20Following%20Users"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2ffetching-followers-and-following-users%2f&amp;title=Fetching%20Followers%20and%20Following%20Users"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Fetching%20Followers%20and%20Following%20Users&amp;body=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2ffetching-followers-and-following-users%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


      <div class="article-style" itemprop="articleBody">
        

<p>Hi,</p>

<p>Welcome back to the twentieth part of <a href="/fsharp/series/fstweet/intro/" target="_blank">Creating a Twitter Clone in F# using Suave</a> blog post series.</p>

<p>In this blog post, we are going to expose two HTTP JSON endpoints to fetch the list of followers and following users. Then we will be updating the user profile page front-end to consume these APIs and populate the <em>Following</em> and <em>Followers</em> Tabs.</p>

<p><img src="/img/fsharp/series/fstweet/following_users.png" alt="" /></p>

<p><img src="/img/fsharp/series/fstweet/followers.png" alt="" /></p>

<h2 id="adding-followers-api">Adding Followers API</h2>

<p>Let&rsquo;s get started with the implementation of followers API.</p>

<p>As we did for other persistence logic, let&rsquo;s define a new type to represent the find followers persistence logic.</p>

<pre><code class="language-fsharp">// src/FsTweet.Web/Social.fs
module Domain =
  // ...
  type FindFollowers = 
    UserId -&gt; AsyncResult&lt;User list, Exception&gt;
// ...
</code></pre>

<p>The implementation function of this type will be leveraging the <a href="http://fsprojects.github.io/SQLProvider/core/composable.html" target="_blank">composable queries</a> concept to find the given user id&rsquo;s followers</p>

<pre><code class="language-fsharp">// src/FsTweet.Web/Social.fs
// ...
module Persistence =
  // ...
  open System.Linq
  // ...

  // GetDataContext -&gt; userId -&gt; 
  //   AsyncResult&lt;DataContext.``public.UsersEntity`` seq, Exception&gt;
  let findFollowers (getDataCtx : GetDataContext) (UserId userId) = asyncTrial {
    let ctx = getDataCtx()

    let selectFollowersQuery = query {
        for s in ctx.Public.Social do
        where (s.FollowingUserId = userId)
        select s.FollowerUserId
    }

    let! followers = 
      query {
        for u in ctx.Public.Users do
        where (selectFollowersQuery.Contains(u.Id))
        select u
      } |&gt; Seq.executeQueryAsync |&gt; AR.catch
      
    return! followers
  }
</code></pre>

<p>Using the <code>selectFollowersQuery</code>, we are first getting the list of followers user ids. Then we are using these identifiers to the get corresponding user details.</p>

<p>One thing to notice here is, we are returning a sequence of <code>DataContext.public.UsersEntity</code> on success. But what we want to return is its domain representation, a list of <code>User</code>.</p>

<p>Like what we did for <a href="/fsharp/series/fstweet/handling-login-request/#finding-the-user-by-username" target="_blank">finding the user by username</a>, we need to map the all the user entities in the sequence to their respective domain model.</p>

<p>To do it, we first need to extract the mapping functionality from the <code>mapUser</code> function.</p>

<pre><code class="language-fsharp">// 
// ...
module Persistence =
  // ...
  open System

  // DataContext.``public.UsersEntity`` -&gt; Result&lt;User, Exception&gt;
  let mapUserEntityToUser (user : DataContext.``public.UsersEntity``) = 
    let userResult = trial {
      let! username = Username.TryCreate user.Username
      let! passwordHash = PasswordHash.TryCreate user.PasswordHash
      let! email = EmailAddress.TryCreate user.Email
      let userEmailAddress =
        match user.IsEmailVerified with
        | true -&gt; Verified email
        | _ -&gt; NotVerified email
      return {
        UserId = UserId user.Id
        Username = username
        PasswordHash = passwordHash
        EmailAddress = userEmailAddress
      } 
    }
    userResult
    |&gt; mapFailure Exception

  //...
</code></pre>

<p>This extracted method returns <code>Result&lt;User, Exception&gt;</code> and then modify the <code>mapUser</code> function to use this function.</p>

<pre><code class="language-fsharp">module Persistence =
  // ...
  let mapUserEntityToUser ... = ...
  
  // DataContext.``public.UsersEntity`` -&gt; AsyncResult&lt;User, Exception&gt;
  let mapUser (user : DataContext.``public.UsersEntity``) = 
    mapUserEntityToUser user
    |&gt; Async.singleton
    |&gt; AR

  // ...
</code></pre>

<p>I just noticed that the name <code>mapUser</code> misleading. So, rename it to <code>mapUserEntity</code> to communicate what it does.</p>

<pre><code class="language-diff">module Persistence =
  ...
- let mapUser (user : DataContext.``public.UsersEntity``) =   
+ let mapUserEntity (user : DataContext.``public.UsersEntity``) =   
  ...

  let findUser ... = asyncTrial {
    ...
-     let! user = mapUser user 
+     let! user = mapUserEntity user
  }
</code></pre>

<p>The next step is transforming a sequence of <code>DataContext.</code><code>public.UsersEntity</code> to a list of <code>User</code>.</p>

<pre><code class="language-fsharp">let mapUserEntities (users : DataContext.``public.UsersEntity`` seq) =
  users // DataContext.``public.UsersEntity`` seq
  |&gt; Seq.map mapUserEntityToUser // Result&lt;User, Exception&gt; seq
  // TODO
</code></pre>

<p>The next step is to transform <code>Result&lt;User, Exception&gt; seq</code> to <code>Result&lt;User list, Exception&gt;</code>.</p>

<blockquote>
<p>As <em>Chessie</em> library already supports the failure side of the <code>Result</code> as a list, we don&rsquo;t specify the failure side as <code>Exception list</code>.</p>
</blockquote>

<p>To do this transformation, Chessie library provides a function called <code>collect</code>.</p>

<pre><code class="language-fsharp">let mapUserEntities (users : DataContext.``public.UsersEntity`` seq) =
  users // DataContext.``public.UsersEntity`` seq
  |&gt; Seq.map mapUserEntityToUser // Result&lt;User, Exception&gt; seq
  |&gt; collect // Result&lt;User list, Exception&gt;
  // TODO
</code></pre>

<p>We are not done yet as the failure side is still a list of Exception but what we want is single Exception. .NET already supports this through <a href="https://msdn.microsoft.com/en-us/library/system.aggregateexception(v=vs.110).aspx" target="_blank">AggregateException</a>.</p>

<pre><code class="language-fsharp">// DataContext.``public.UsersEntity`` seq -&gt; 
//  AsyncResult&lt;User list, Exception&gt;
let mapUserEntities (users : DataContext.``public.UsersEntity`` seq) =
  users // DataContext.``public.UsersEntity`` seq
  |&gt; Seq.map mapUserEntityToUser // Result&lt;User, Exception&gt; seq
  |&gt; collect // Result&lt;User list, Exception&gt;
  |&gt; mapFailure 
      (fun errs -&gt; new AggregateException(errs) :&gt; Exception)
      // Result&lt;User list, Exception&gt;
  |&gt; Async.singleton // Async&lt;Result&lt;User list, Exception&gt;&gt;
  |&gt; AR // AsyncResult&lt;User list, Exception&gt;
</code></pre>

<p>Using the <code>mapFailure</code> function from Chessie, we are transforming the list of exceptions into an <code>AggregateException</code>, and then we are mapping it to <code>AsyncResult&lt;User list, Exception&gt;</code>.</p>

<p>With this <code>mapUserEntities</code> function in place, we can now return a <code>User list</code> in the <code>findFollowers</code> function</p>

<pre><code class="language-diff">module Persistence =
  ...
+ open User.Persistence
  ...

  let findFollowers ... = asyncTrail {
    ...
-   return! followers  
+   return! mapUserEntities followers
  } 
</code></pre>

<p>Now we have the persistence layer ready.</p>

<p>The JSON response that we are going to send will have the following structure</p>

<pre><code class="language-json">{
  &quot;users&quot;: [
    {
      &quot;username&quot;: &quot;tamizhvendan&quot;
    }
  ]
}
</code></pre>

<blockquote>
<p>To keep it simple, we are just returning the username of the users.</p>
</blockquote>

<p>To model the corresponding server-side representation of this JSON object, let&rsquo;s add some types along with the static member function <code>ToJson</code> which is required by the Chiron library to serialize the type to JSON.</p>

<pre><code class="language-fsharp">// src/FsTweet.Web/Social.fs
// ...
module Suave =
  // ...

  type UserDto = {
    Username : string
  } with
   static member ToJson (u:UserDto) = 
      json { 
          do! Json.write &quot;username&quot; u.Username
      }

  type UserDtoList = UserDtoList of (UserDto list) with
    static member ToJson (UserDtoList userDtos) = 
      let usersJson = 
        userDtos
        |&gt; List.map (Json.serializeWith UserDto.ToJson)
      json {
        do! Json.write &quot;users&quot; usersJson
      }

  let mapUsersToUserDtoList (users : User list) =
    users
    |&gt; List.map (fun user -&gt; {Username = user.Username.Value})
    |&gt; UserDtoList

  // ...
</code></pre>

<p>To expose the <code>findFollowers</code> function as an HTTP API, we first need to specify what we need to do for both success and failure.</p>

<pre><code class="language-fsharp">module Suave =
  // ...
  let onFindUsersFailure (ex : System.Exception) =
    printfn &quot;%A&quot; ex
    JSON.internalError

  let onFindUsersSuccess (users : User list) =
    mapUsersToUserDtoList users
    |&gt; Json.serialize
    |&gt; JSON.ok
  // ...
</code></pre>

<p>Then add a new function which handles the request for fetching user&rsquo;s followers</p>

<pre><code class="language-fsharp">// FindFollowers -&gt; int -&gt; WebPart
let fetchFollowers (findFollowers: FindFollowers) userId ctx = async {
  let! webpart =
    findFollowers (UserId userId)
    |&gt; AR.either onFindUsersSuccess onFindUsersFailure
  return! webpart ctx
}
</code></pre>

<p>Finally, add the route for the HTTP endpoint.</p>

<pre><code class="language-diff">  let webpart getDataCtx getStreamClient =
    ...
-   POST &gt;=&gt; path &quot;/follow&quot; &gt;=&gt; requiresAuth2 handleFollowUser
+   let findFollowers = findFollowers getDataCtx
+   choose [
+     GET &gt;=&gt; pathScan &quot;/%d/followers&quot; (fetchFollowers findFollowers)
+     POST &gt;=&gt; path &quot;/follow&quot; &gt;=&gt; requiresAuth2 handleFollowUser
+   ] 
</code></pre>

<h2 id="adding-following-users-api">Adding Following Users API</h2>

<p>The API to serve the list of users being followed by the given user follows the similar structure except for the actual backend query</p>

<pre><code class="language-fsharp">// src/FsTweet.Web/Social.fs
module Domain = 
  // ...
  type FindFollowingUsers = UserId -&gt; AsyncResult&lt;User list, Exception&gt;

module Persistence =
  // ...
  let findFollowingUsers (getDataCtx : GetDataContext) (UserId userId) = asyncTrial {
    let ctx = getDataCtx()

    let selectFollowingUsersQuery = query {
        for s in ctx.Public.Social do
        where (s.FollowerUserId = userId)
        select s.FollowingUserId
    }

    let! followingUsers = 
      query {
        for u in ctx.Public.Users do
        where (selectFollowingUsersQuery.Contains(u.Id))
        select u
      } |&gt; Seq.executeQueryAsync |&gt; AR.catch

    return! mapUserEntities followingUsers
  }
</code></pre>

<p>In the <code>selectFollowingUsersQuery</code>, we are selecting the list of user ids that are being followed by the provided user id.</p>

<p>Like <code>fetchFollowers</code>, we just have to add <code>fetchFollowingUsers</code> function and expose it to a new HTTP route</p>

<pre><code class="language-fsharp">module Suave =
  // ...

  // FindFollowingUsers -&gt; int -&gt; FindFollowingUsers
  let fetchFollowingUsers (findFollowingUsers: FindFollowingUsers) userId ctx = async {
    let! webpart =
      findFollowingUsers (UserId userId)
      |&gt; AR.either onFindUsersSuccess onFindUsersFailure
    return! webpart ctx
  }
</code></pre>

<pre><code class="language-diff">  let webpart getDataCtx getStreamClient =
    ...
    let findFollowers = findFollowers getDataCtx
+   let findFollowingUsers = findFollowingUsers getDataCtx    
    choose [
      GET &gt;=&gt; pathScan &quot;/%d/followers&quot; (fetchFollowers findFollowers)
+     GET &gt;=&gt; pathScan &quot;/%d/following&quot; (fetchFollowingUsers findFollowingUsers)
      POST &gt;=&gt; path &quot;/follow&quot; &gt;=&gt; requiresAuth2 handleFollowUser
    ] 
</code></pre>

<p>Now we both the endpoints are up and running.</p>

<h2 id="updating-ui">Updating UI</h2>

<p>To consume these two APIs and to render it on the client side, we need to update the <em>social.js</em></p>

<pre><code class="language-js">// src/FsTweet.Web/assets/js/social.js
$(function(){
  // ...
  var usersTemplate = `
    {{#users}}
      &lt;div class=&quot;well user-card&quot;&gt;
        &lt;a href=&quot;/{{username}}&quot;&gt;@{{username}}&lt;/a&gt;
      &lt;/div&gt;
    {{/users}}`;

  
  function renderUsers(data, $body, $count) {
    var htmlOutput = Mustache.render(usersTemplate, data);
    $body.html(htmlOutput);
    $count.html(data.users.length);
  }

  (function loadFollowers () {
    var url = &quot;/&quot; + fsTweet.user.id  + &quot;/followers&quot;
    $.getJSON(url, function(data){
      renderUsers(data, $(&quot;#followers&quot;), $(&quot;#followersCount&quot;))
    })
  })();

  (function loadFollowingUsers() {
    var url = &quot;/&quot; + fsTweet.user.id  + &quot;/following&quot;
    $.getJSON(url, function(data){
      renderUsers(data, $(&quot;#following&quot;), $(&quot;#followingCount&quot;))
    })
  })();
});
</code></pre>

<p>Using jQuery&rsquo;s <a href="http://api.jquery.com/jquery.getjson/" target="_blank">getJSON</a> function, we are fetching the JSON object and then rendering it using <a href="https://mustache.github.io/#demo" target="_blank">Mustache</a> template.</p>

<p>That&rsquo;s it!</p>

<h2 id="summary">Summary</h2>

<p>In this blog post, we have exposed two HTTP APIs to retrieve the list of followers and following users.</p>

<p>As we saw in other posts, we are just doing transformations to achieve what we want. In the process, we are creating some useful abstractions (like what we did here for <code>mapUserEntityToUser</code> function) which in turn helps us to deliver the features faster (like the <code>AR.either</code> function).</p>

<p>With this, we are done with all the features that will be part of this initial version of FsTweet. In the upcoming posts, we are going to add support for logging and learn how to deploy it to Azure.</p>

<p>As usual, the source code of this blog post is available on <a href="https://github.com/demystifyfp/FsTweet/tree/v0.19" target="_blank">GitHub</a>.</p>

<h3 id="next-part">Next Part</h3>

<p><a href="/fsharp/series/fstweet/deploying-to-azure-app-service/" target="_blank">Deploying to Azure App Service</a></p>

      </div>

      


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/suave">suave</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/sqlprovider">SQLProvider</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/chiron">chiron</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/rop">rop</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/fsharp">fsharp</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/chessie">chessie</a>
  
</div>



    </div>
  </div>

</article>



<div class="article-container article-widget">
  <div class="hr-light"></div>
  <h3>Related</h3>
  <ul>
    
    <li><a href="/fsharp/series/fstweet/posting-new-tweet/">Posting New Tweet</a></li>
    
    <li><a href="/fsharp/series/fstweet/following-a-user/">Following a User</a></li>
    
    <li><a href="/fsharp/series/fstweet/handling-login-request/">Handling Login Request</a></li>
    
    <li><a href="/fsharp/series/fstweet/adding-login/">Adding Login Page</a></li>
    
    <li><a href="/fsharp/series/fstweet/verifying-user-email/">Verifying User Email</a></li>
    
  </ul>
</div>




<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "demystifyfp" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Demystify FP &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    
    <script id="dsq-count-scr" src="//demystifyfp.disqus.com/count.js" async></script>
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    
    <script src="/js/custom.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/fsharp.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/diff.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

