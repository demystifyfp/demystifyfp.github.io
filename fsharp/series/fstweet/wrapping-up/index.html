<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.30.2" />
  
  <meta name="description" content="Demystifying">

  
  <link rel="alternate" hreflang="en-us" href="https://www.demystifyfp.com/fsharp/series/fstweet/wrapping-up/">

  
  


  

  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  
  <link rel="stylesheet" href="/css/custom.css">
  

  

  
  <link rel="alternate" href="https://www.demystifyfp.com/index.xml" type="application/rss+xml" title="Demystify FP">
  <link rel="feed" href="https://www.demystifyfp.com/index.xml" type="application/rss+xml" title="Demystify FP">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://www.demystifyfp.com/fsharp/series/fstweet/wrapping-up/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@demystifyfp">
  <meta property="twitter:creator" content="@demystifyfp">
  
  <meta property="og:site_name" content="Demystify FP">
  <meta property="og:url" content="https://www.demystifyfp.com/fsharp/series/fstweet/wrapping-up/">
  <meta property="og:title" content="Wrapping Up | Demystify FP">
  <meta property="og:description" content="">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2017-11-14T06:42:51&#43;05:30">
  
  <meta property="article:modified_time" content="2017-11-14T06:42:51&#43;05:30">
  

  

  <title>Wrapping Up | Demystify FP</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Demystify FP</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
            Books
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="nav-item">
              <a href="http://products.tamizhvendan.in/fsharp-applied">
                
                <span>F# Applied</span>
              </a>
            </li>
            
          </ul>
        </li>

        
        

        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
            Tutorials
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="nav-item">
              <a href="/fsharp/series/fstweet/intro">
                
                <span>Twitter Clone in F#</span>
              </a>
            </li>
            
          </ul>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <div class="article-inner">
      <h1 itemprop="name">Wrapping Up</h1>

      

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2017-11-14 06:42:51 &#43;0530 IST" itemprop="datePublished">
      Tue, Nov 14, 2017
    </time>
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    3 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="https://www.demystifyfp.com/fsharp/series/fstweet/wrapping-up/#disqus_thread"></a>
  

  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Wrapping%20Up&amp;url=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2fwrapping-up%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2fwrapping-up%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2fwrapping-up%2f&amp;title=Wrapping%20Up"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2fwrapping-up%2f&amp;title=Wrapping%20Up"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Wrapping%20Up&amp;body=https%3a%2f%2fwww.demystifyfp.com%2ffsharp%2fseries%2ffstweet%2fwrapping-up%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


      <div class="article-style" itemprop="articleBody">
        

<p>Hi,</p>

<p>Thank you for joining me in the quest of developing a real world application using functional programming principles in F#. I belived it has added value to you.</p>

<p>Let&rsquo;s have a quick recap what we have done so far and discuss the journey ahead before we wrap up <a href="/fsharp/series/fstweet/intro/" target="_blank">this blog post series</a>.</p>

<h2 id="code-organization">Code Organization</h2>

<p>Here is the architectural (colourful!) diagram of our FsTweet Application.</p>

<p><img src="/img/fsharp/series/fstweet/fstweet_10_000_ft_view.png" alt="" /></p>

<p>The black ellipses represent the business use cases and the red circles at the top represent the common abstractions.</p>

<p>It is an opinionated approach based on the software development principle, <a href="https://thebojan.ninja/2015/04/08/high-cohesion-loose-coupling/" target="_blank">high cohesion and loose coupling</a>.</p>

<p>Organizing the code around business use cases give us a clarity while trying to understand the system.</p>

<blockquote>
<p>The code is more often read than written.</p>
</blockquote>

<p><img src="/img/fsharp/series/fstweet/code_organization_tree.png" alt="" /></p>

<h2 id="the-composition-root">The Composition Root</h2>

<p>We used the <a href="http://blog.ploeh.dk/2011/07/28/CompositionRoot/" target="_blank">Composition Root Pattern</a> to glue the different modules together.</p>

<blockquote>
<p>Where should we compose object graphs?</p>

<p>As close as possible to the application&rsquo;s entry point.</p>

<p>A Composition Root is a (preferably) unique location in an application where modules are composed together - <a href="https://twitter.com/ploeh" target="_blank">Mark Seemann</a></p>
</blockquote>

<p>The Composition Root pattern along with <a href="https://fsharpforfunandprofit.com/posts/dependency-injection-1/" target="_blank">dependency injection through partial application</a> provided us the foundation for our application.</p>

<p>In FsTweet, the <code>main</code> function is the composition root for the entire application</p>

<p><img src="/img/fsharp/series/fstweet/composition_root.png" alt="" /></p>

<p>Then for each business use case, the presentation layer Suave&rsquo;s <code>webpart</code> function is the composition root.</p>

<p><img src="/img/fsharp/series/fstweet/usecase_composition_root.png" alt="" /></p>

<p>There are other patterns like <a href="http://blog.ploeh.dk/2017/08/07/f-free-monad-recipe/" target="_blank">Free Monad</a> and <a href="https://www.youtube.com/watch?v=xPlsVVaMoB0" target="_blank">Reader Monad</a> to solve this in a different way. For our use case, the approach that we used helped us to get the job done without any complexties.</p>

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">The free monad series by <a href="https://twitter.com/ploeh?ref_src=twsrc%5Etfw">@ploeh</a> is excellent. Still, I think free monads, esp. in F#, are solving a non-problem in overly complicated way.</p>&mdash; Tomas Petricek (@tomaspetricek) <a href="https://twitter.com/tomaspetricek/status/892037756041523204?ref_src=twsrc%5Etfw">July 31, 2017</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>Being said that, the context always wins. For the application that we took, it made sense. The Free Monad and Reader Monad approaches suit well for certain kind of problems. Hence, my recommendation would be, learn all the approaches, pick the one that suits your project and <a href="https://www.infoq.com/presentations/Simple-Made-Easy" target="_blank">keep it simple</a>.</p>

<p>I encourage you to try Free Monad and Reader Monad apporaches with the FsTweet codebase and do let me know once you are done. It&rsquo;d be a good resource for entire fsharp community!</p>

<h2 id="the-journey-ahead">The Journey Ahead</h2>

<p>There are lot of ways, we can modify/extend/play with FsTweet.</p>

<ul>
<li><p>Replacing Suave with <a href="https://freya.io/" target="_blank">Freya</a> or <a href="https://github.com/dustinmoris/Giraffe" target="_blank">Girafee</a> or <a href="https://docs.microsoft.com/en-us/aspnet/core/" target="_blank">ASP.NET Core</a></p></li>

<li><p>Replacing SQLProvider with <a href="https://github.com/rspeele/Rezoom.SQL" target="_blank">Rezoom.SQL</a> or <a href="https://docs.microsoft.com/en-us/ef/core/" target="_blank">Entity Framework</a></p></li>

<li><p>Replacing GetStream.io with <a href="https://fsharpforfunandprofit.com/posts/concurrency-actor-model/" target="_blank">F# Agents</a> or <a href="http://getakka.net/" target="_blank">Akka.Net</a> with <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource" target="_blank">Event Source</a></p></li>

<li><p>Features like, suggesting whom to follow (Machine Learning!), highlights, hashtag based searching, unfollow and much more. You can even change the character limit to 280 characters!</p></li>
</ul>

<p>Do drop a note when you make any of these or something else that you found fun and meaningful</p>

<p>Once again thanks for joining me :)</p>

<blockquote>
<p>There are two ways of spreading light: to be the candle or the mirror that reflects it. - Edith Wharton</p>
</blockquote>

      </div>

      


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/fsharp">fsharp</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/suave">suave</a>
  
</div>



    </div>
  </div>

</article>



<div class="article-container article-widget">
  <div class="hr-light"></div>
  <h3>Related</h3>
  <ul>
    
    <li><a href="/fsharp/series/fstweet/adding-logs/">Adding Logs using Logary</a></li>
    
    <li><a href="/fsharp/series/fstweet/deploying-to-azure-app-service/">Deploying to Azure App Service</a></li>
    
    <li><a href="/fsharp/series/fstweet/fetching-followers-and-following-users/">Fetching Followers and Following Users</a></li>
    
    <li><a href="/fsharp/series/fstweet/following-a-user/">Following a User</a></li>
    
    <li><a href="/fsharp/series/fstweet/adding-user-profile-page/">Adding User Profile Page</a></li>
    
  </ul>
</div>




<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "demystifyfp" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Demystify FP &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    
    <script id="dsq-count-scr" src="//demystifyfp.disqus.com/count.js" async></script>
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    
    <script src="/js/custom.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/fsharp.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/diff.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

